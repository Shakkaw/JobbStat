"use strict";angular.module("angularApp",["ngRoute"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl",controllerAs:"main"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl",controllerAs:"about"}).otherwise({redirectTo:"/"})}]),angular.module("angularApp").controller("MainCtrl",["$scope","$http",function(a,b){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"],a.wew="Yrkeslista",b.get("./data/jobbstat_man.json").success(function(c){a.dataset=c,b.get("./data/jobbstat_kvinna.json").success(function(c){a.dataset2=c,b.get("./data/jobbstat_region.json").success(function(c){a.regiondata=c,b.get("./data/manadslon_total.json").success(function(c){a.manadslondata=c,b.get("./data/mapdata.json").success(function(b){a.mapdata=b.dataset.regioner,a.createDataset(),a.lanColor()})})})})}),a.lanOrdnad=[{id:"25",namn:"Norrbottens län",invanare:"249987"},{id:"24",namn:"Västerbottens län",invanare:"262362"},{id:"22",namn:"Västernorrlands län",invanare:"243061"},{id:"23",namn:"Jämtlands län",invanare:"126765"},{id:"21",namn:"Gävleborgs län",invanare:"279991"},{id:"20",namn:"Dalarnas län",invanare:"278903"},{id:"03",namn:"Uppsala län",invanare:"348942"},{id:"01",namn:"Stockholms län",invanare:"2198044"},{id:"04",namn:"Södermanlands län",invanare:"280666"},{id:"19",namn:"Västmanlands län",invanare:"261703"},{id:"18",namn:"Örebro län",invanare:"288150"},{id:"17",namn:"Värmlands län",invanare:"274691"},{id:"05",namn:"Östergötlands län",invanare:"442105"},{id:"14",namn:"Västra Götalands län",invanare:"1632012"},{id:"09",namn:"Gotlands län",invanare:"57255"},{id:"08",namn:"Kalmar län",invanare:"235598"},{id:"06",namn:"Jönköpings län",invanare:"344262"},{id:"07",namn:"Kronobergs län",invanare:"189128"},{id:"10",namn:"Blekinge län",invanare:"154157"},{id:"13",namn:"Hallands län",invanare:"310665"},{id:"12",namn:"Skåne län",invanare:"1288908"}],a.currentLan="",a.lanColor=function(){for(var b=0,c=a.lanOrdnad.length-1;c>=0;c--)a.currentObject.region[a.lanOrdnad[c].id].total/a.lanOrdnad[c].invanare>b&&(b=a.currentObject.region[a.lanOrdnad[c].id].total/a.lanOrdnad[c].invanare);for(var d=a.lanOrdnad.length-1;d>=0;d--){console.log(a.lanOrdnad[d]);var e=angular.element(document.getElementById("r"+a.lanOrdnad[d].id));console.log(e);var f=a.currentObject.region[a.lanOrdnad[d].id].total,g=a.lanOrdnad[d].invanare,h=f/g;console.log(h+" "+b),console.log(h/b);var i=h/b;e.css("fill","rgba(51, 122, 183, "+i+")")}},a.selectedID="0000",a.labels=["book","book","pencil","university","cog","industry","leaf","heart","briefcase","question"],a.memes=function(b){return"rgba(51, 122, 183, "+b/a.currentObject.maxVal+")"},a.colormap=function(a){console.log(a)},a.isActive=function(b){return b===a.currentObject.id?!0:!1},a.wewlad=function(){return"aaa"},a.generateSearch=function(){a.searchObject=[];var b=0;for(var c in a.totaldata)a.searchObject[b]={key:c,label:a.totaldata[c].label},b++;console.log(a.searchObject)},a.createDataset=function(){a.totaldata={};for(var b in a.dataset.dataset.dimension.Yrke2012.category.label)a.totaldata[b]=a.create(b),a.totaldata[b].label=a.dataset.dataset.dimension.Yrke2012.category.label[b];console.log(a.regiondata.dataset.dimension.Region.category.index);for(b in a.regiondata.dataset.dimension.Region.category.index){console.log(b+" "+a.regiondata.dataset.dimension.Region.category.index[b]+" "+a.regiondata.dataset.dimension.Region.category.label[b]);var c=({index:a.regiondata.dataset.dimension.Region.category.index[b],label:a.regiondata.dataset.dimension.Region.category.label[b]},860*a.regiondata.dataset.dimension.Region.category.index[b]),d=860*a.regiondata.dataset.dimension.Region.category.index[b]+860,e=a.regiondata.dataset.value.slice(c,d);for(var f in a.regiondata.dataset.dimension.Yrke2012.category.index){var g=e[2*a.regiondata.dataset.dimension.Yrke2012.category.index[f]],h=e[2*a.regiondata.dataset.dimension.Yrke2012.category.index[f]+1],i=g+h,j={id:b,total:i,man:g,kvinnor:h};i>a.totaldata[f].regionMax.total?a.totaldata[f].regionMax=j:i<a.totaldata[f].regionMin.total&&(a.totaldata[f].regionMin=j),g>a.totaldata[f].regionMaxMan.man?a.totaldata[f].regionMaxMan=j:g<a.totaldata[f].regionMinMan.man&&(a.totaldata[f].regionMinMan=j),h>a.totaldata[f].regionMaxKvinnor.kvinnor?a.totaldata[f].regionMaxKvinnor=j:h<a.totaldata[f].regionMinKvinnor.kvinnor&&(a.totaldata[f].regionMinKvinnor=j),a.totaldata[f].region[b]=j}}var k=2592,l=6;for(var m in a.manadslondata.dataset.dimension.Yrke2012.category.index){var n=a.manadslondata.dataset.dimension.Yrke2012.category.index[m];for(var o in a.manadslondata.dataset.dimension.Sektor.category.index){var p=a.manadslondata.dataset.dimension.Sektor.category.index[o],q={};for(var r in a.manadslondata.dataset.dimension.ContentsCode.category.index){var s=a.manadslondata.dataset.dimension.ContentsCode.category.index[r],t=p*k,u=n*l,v=(a.manadslondata.dataset.dimension.Sektor.category.index[o],a.manadslondata.dataset.dimension.ContentsCode.category.index[r]),w=t+u+s,x=a.manadslondata.dataset.value[w];q[v]=x,"0000"!=m&&"0001"!=m&&(a.totaldata[m].sektorTotal[o]=q)}}}console.log(a.totaldata),a.generateSearch()},a.create=function(b){a.currentObject={id:0,total:0,totalMan:0,totalKvinnor:0,maxVal:0,rowVal:[0,0,0,0,0,0,0,0,0,0],columnVal:[0,0,0,0,0,0,0,0,0],cell:[],regionMax:{id:"00",total:0,man:0,kvinnor:0},regionMin:{id:"00",total:99999,man:99999,kvinnor:99999},regionMaxMan:{id:"00",total:0,man:0,kvinnor:0},regionMinMan:{id:"00",total:99999,man:99999,kvinnor:99999},regionMaxKvinnor:{id:"00",total:0,man:0,kvinnor:0},regionMinKvinnor:{id:"00",total:99999,man:99999,kvinnor:99999},regionMaxDensity:{id:"00",total:0,man:0,kvinnor:0},regionMinDensity:{id:"00",total:99999,man:99999,kvinnor:99999},region:[],sektorTotal:{}},a.selectedID=b,a.objectData1=a.dataset.dataset.value.slice(90*a.getCurrentIndex(),90*a.getCurrentIndex()+90),a.objectData2=a.dataset2.dataset.value.slice(90*a.getCurrentIndex(),90*a.getCurrentIndex()+90),a.currentObject.id=b;for(var c=0;c<a.objectData1.length;c++){var d={man:a.objectData1[c],kvinnor:a.objectData2[c],total:a.objectData1[c]+a.objectData2[c],column:c%9,row:Math.floor(c/9)};a.currentObject.cell[c]=d,a.currentObject.total+=d.total,a.currentObject.totalMan+=d.man,a.currentObject.totalKvinnor+=d.kvinnor,a.currentObject.columnVal[d.column]+=d.total,a.currentObject.rowVal[d.row]+=d.total,d.total>a.currentObject.maxVal&&(a.currentObject.maxVal=d.total)}return a.currentObject},a.select=function(b){console.log(a.totaldata[b]),a.currentObject=a.totaldata[b],a.lanColor()},a.getCurrentIndex=function(){return a.dataset.dataset.dimension.Yrke2012.category.index[a.selectedID]},a.crunch=function(a,b,c){return a*b+c}}]),angular.module("angularApp").controller("AboutCtrl",["$scope",function(a){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"],a.meme="wow m8"}]),angular.module("angularApp").run(["$templateCache",function(a){a.put("views/about.html","<p>This is the about view.</p> <p>{{meme}}</p>"),a.put("views/main.html",'<div class="row"> <div class="col-lg-9"> <div class="panel panel-default"> <div class="panel-heading"><h4><i class="fa fa-bar-chart" aria-hidden="true"></i> {{currentObject.label}}</h4></div> <div class="panel-body"> <table class="table-condensed results-table"> <tr class="toprow"> <th>Namn</th> <th>16-24</th> <th>25-29</th> <th>30-34</th> <th>35-39</th> <th>40-44</th> <th>45-49</th> <th>50-54</th> <th>55-59</th> <th>60-64</th> <th>Total</th> </tr> <tr ng-repeat="(key,val) in dataset2.dataset.dimension.UtbinriktnSUN2000.category.index" ng-class-even="\'evenrow\'"> <td class="toprow"><i class="fa fa-{{labels[$index]}}" aria-hidden="true"></i> {{dataset2.dataset.dimension.UtbinriktnSUN2000.category.label[key]}}</td> <td class="colorcell" ng-style="{\'background-color\': memes(currentObject.cell[$index + 9 * $parent.$index].total)}" ng-repeat="(wew,lad) in dataset2.dataset.dimension.Alder.category.index"> <span class="">{{currentObject.cell[$index + 9 * $parent.$index].total}}</span> </td> <td class="colorcell">{{currentObject.rowVal[$index]}}</td> </tr> <tr> <th>Total</th> <td class="colorcell" ng-repeat="val in currentObject.columnVal track by $index">{{val}}</td> </tr> </table> </div> </div> <div class="panel panel-primary"> <div class="panel-heading"><i class="fa fa-info-circle" aria-hidden="true"></i> Översikt </div> <div class="panel-body row"> <div class="col-sm-4"> <ul class="list-unstyled"> <li><strong>Antal arbetare: </strong>{{currentObject.total}}</li> <li><strong>Antal män: </strong>{{currentObject.totalMan}}</li> <li><strong>Antal kvinnor: </strong>{{currentObject.totalKvinnor}}</li> <li><strong>Andel män: </strong>{{currentObject.totalMan/currentObject.total *100 | number:0}} %</li> <li><strong>Andel kvinnor: </strong>{{currentObject.totalKvinnor/currentObject.total *100 | number:0}} %</li> </ul> </div> <div class="col-sm-4"> <table class="regiontable"> <tr> <th>Region</th> <th>Antal</th> <th>n/10k</th> </tr> <tr ng-repeat="region in lanOrdnad"> <td>{{region.namn}}</td> <td>{{currentObject.region[region.id].total}}</td> <td>{{currentObject.region[region.id].total/region.invanare * 10000 | number: 0}}</td> </tr> </table> </div> <div class="col-sm-4"> <div class=""> <svg class="karta" xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:cc="http://web.resource.org/cc/" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" version="1.0" id="svg2"> <defs id="defs640"> <metadata id="metadata1880"><rdf:rdf><cc:work rdf:about=""><dc:title>Counties of Sweden</dc:title><dc:date>2010-05-01</dc:date><dc:creator><cc:agent><dc:title>Lokal_Profil</dc:title></cc:agent></dc:creator><cc:license rdf:resource="http://creativecommons.org/licenses/by-sa/2.5/"><dc:rights><cc:agent><dc:title>cc-by-sa-2.5</dc:title></cc:agent></dc:rights><dc:format>image/svg+xml</dc:format><dc:type rdf:resource="http://purl.org/dc/dcmitype/StillImage"></cc:work><cc:license rdf:about="http://creativecommons.org/licenses/by-sa/2.5/"><cc:permits rdf:resource="http://web.resource.org/cc/Reproduction"><cc:permits rdf:resource="http://web.resource.org/cc/Distribution"><cc:requires rdf:resource="http://web.resource.org/cc/Notice"><cc:requires rdf:resource="http://web.resource.org/cc/Attribution"><cc:permits rdf:resource="http://web.resource.org/cc/DerivativeWorks"><cc:requires rdf:resource="http://web.resource.org/cc/ShareAlike"></cc:license></rdf:rdf> </metadata> <style type="text/css" id="style_css_sheet">.lan { fill:#8EC4D5; fill-rule:evenodd; stroke:#EEE; stroke-width:1.0001;}</style> <g class="lan" id="Lan"> <path ng-repeat="region in mapdata" id="r{{region.id}}" class="region" d="{{region.d}}"> </g> </svg> </div> </div> </div> </div> <div class="panel panel-primary"> <div class="panel-heading"><i class="fa fa-info-circle" aria-hidden="true"></i> Lönestatistik</div> <div class="panel-body"> <table class="table-condensed results-table"> <tr class="toprow"> <th></th> <th>Medellön</th> <th>Medianlön</th> <th>10p</th> <th>25p</th> <th>75p</th> <th>90p</th> </tr> <tr class="list-unstyled" ng-repeat="(key,sektor) in currentObject.sektorTotal track by $index"> <td class="toprow">{{manadslondata.dataset.dimension.Sektor.category.label[key]}}</td> <td class="colorcell" ng-repeat="wew in sektor track by $index">{{sektor[$index]}}</td> </tr> </table> </div> </div> </div> <div class="col-sm-6 col-lg-3"> <div class="panel panel-default search-panel"> <div class="panel-heading"><i class="fa fa-list" aria-hidden="true"></i> {{wew}} <input placeholder="Sök yrke" ng-model="query" type="text"> </div> <div class="panel-body search-table pre-scrollable"> <table class="table table-condensed"> <tr ng-class="{activerow: isActive(jobb.key)}" ng-repeat="jobb in searchObject | filter: query"> <td><a href="" ng-click="select(jobb.key)">{{jobb.label}}</a></td> </tr> </table> </div> </div> </div> </div>')}]);